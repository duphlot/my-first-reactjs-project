import{u as A,r as n,a as e,F as b,j as t,f as C,h as l}from"./index-71865a70.js";import{g as j,o as w,a as D,r as O,b as x}from"./index.esm2017-9a477d71.js";import{a as V}from"./firebaseConfig-cc016d38.js";function F(){const h=A(),[f,u]=n.useState(!1),p=j();n.useEffect(()=>{const r=w(p,s=>{s?u(!0):(u(!1),h("/login"))});return()=>r()},[p,h]);let[o,i]=n.useState([]),[m,v]=n.useState("");n.useState("");let[c,y]=n.useState("orderCode");const N=async()=>{const r=D(V),s=O(r,"order"),a=await x(s);a.exists()?(i(Object.values(a.val())),console.log(a.val())):alert("No data available")},g=()=>{const r=o.filter(s=>Object.values(s).some(a=>typeof a=="string"&&a.toLowerCase().includes(m.toLowerCase())));r.length>0?i(r):alert("Order not found")},S=r=>r.sort((s,a)=>(s[c]??"")<(a[c]??"")?-1:(s[c]??"")>(a[c]??"")?1:0);return n.useEffect(()=>{N()},[]),f?e(b,{children:e("body",{style:{overflowY:"scroll"},children:t("div",{className:"admin-container",children:[e("h1",{className:"admin-title",children:"Show the all order billing"}),t("div",{className:"admin-controls",children:[e("button",{className:"admin-button",onClick:N,children:"Reload"}),t("div",{className:"search-container",children:[t("div",{className:"sort-container",children:[e("label",{htmlFor:"sort",children:"Sort by: "}),t("select",{id:"sort",className:"sort-select",value:c,onChange:r=>y(r.target.value),children:[e("option",{value:"orderCode",children:"Order Code"}),e("option",{value:"igname",children:"IG Name"}),e("option",{value:"number",children:"Number"}),e("option",{value:"address",children:"Address"}),e("option",{value:"price",children:"Price"}),e("option",{value:"status",children:"Status"}),e("option",{value:"createdAt",children:"Date"})]})]}),e("input",{type:"text",className:"search-input",placeholder:"Search by any field",value:m,onChange:r=>v(r.target.value)}),e("button",{className:"search-button",onClick:g,children:"Search"})]})]}),t("table",{className:"order-table",children:[e("thead",{children:t("tr",{children:[e("th",{children:"Order Code"}),e("th",{children:"tên ig"}),e("th",{children:"Number"}),e("th",{children:"Address"}),e("th",{children:"Item"}),e("th",{children:"giá"}),e("th",{children:"sl"}),e("th",{children:"Total Price"}),e("th",{children:"Status"}),e("th",{children:"Date"})]})}),e("tbody",{children:S(o).map((r,s)=>t("tr",{className:"order-row",children:[e("td",{className:"order-code",children:r.orderCode}),e("td",{className:"order-igname",children:r.igname}),e("td",{className:"order-number",children:r.number}),e("td",{className:"order-address",children:r.address}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((a,d)=>e("div",{className:"product-details",children:e("span",{className:"product-name",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.name})},d)):e("span",{children:"No products available"})}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((a,d)=>e("div",{className:"product-details",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(a.price.replace(/,/g,"").replace("VND","")))},d)):e("span",{children:"No products available"})}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((a,d)=>e("div",{className:"product-details",children:e("span",{className:"product-quantity",children:a.quantity})},d)):e("span",{children:"No products available"})}),e("td",{className:"order-price",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(r.price))}),e("td",{className:"order-status",children:t("select",{value:r.status,onChange:a=>{const d=[...o];d[s].status=a.target.value,i(d)},children:[e("option",{value:"chưa xác nhận",children:"Chưa xác nhận"}),e("option",{value:"đã xác nhận",children:"Đã xác nhận"}),e("option",{value:"đã hoàn thành",children:"Đã hoàn thành"})]})}),e("td",{className:"order-date",children:new Date(r.date??"").toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"})})]},s))})]})]})})}):e("p",{children:"Redirecting to login..."})}const E=()=>t(b,{children:[t("div",{className:"sidebar",children:[e("h2",{children:"Admin Dashboard"}),t("ul",{children:[e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/dashboard",children:"Dashboard"})}),e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/users",children:"Users"})}),e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/products",children:"Products"})}),e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/orders",children:"Orders"})})]})]}),t(C,{children:[e(l,{path:"/dashboard",element:e("h1",{children:"Admin Dashboard"})}),e(l,{path:"/users",element:e("h1",{children:"Users"})}),e(l,{path:"/products",element:e("h1",{children:"Products"})}),e(l,{path:"/orders",element:e(F,{})})]})]});export{E as default};
