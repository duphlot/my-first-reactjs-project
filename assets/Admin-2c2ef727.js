import{u as y,r as c,a as e,F as S,j as s}from"./index-82c254c9.js";import{g as A,o as C,a as w,r as O,b as x}from"./index.esm2017-9a477d71.js";import{a as D}from"./firebaseConfig-cc016d38.js";function I(){const i=y(),[N,h]=c.useState(!1),u=A();c.useEffect(()=>{const r=C(u,a=>{a?h(!0):(h(!1),i("/login"))});return()=>r()},[u,i]);let[d,o]=c.useState([]),[p,v]=c.useState("");c.useState("");let[l,b]=c.useState("orderCode");const m=async()=>{const r=w(D),a=O(r,"order"),t=await x(a);t.exists()?(o(Object.values(t.val())),console.log(t.val())):alert("No data available")},f=()=>{const r=d.filter(a=>Object.values(a).some(t=>typeof t=="string"&&t.toLowerCase().includes(p.toLowerCase())));r.length>0?o(r):alert("Order not found")},g=r=>r.sort((a,t)=>(a[l]??"")<(t[l]??"")?-1:(a[l]??"")>(t[l]??"")?1:0);return c.useEffect(()=>{m()},[]),N?e(S,{children:e("body",{style:{overflowY:"scroll"},children:s("div",{className:"admin-container",children:[e("h1",{className:"admin-title",children:"Show the all order billing"}),s("div",{className:"admin-controls",children:[e("button",{className:"admin-button",onClick:m,children:"Reload"}),s("div",{className:"search-container",children:[s("div",{className:"sort-container",children:[e("label",{htmlFor:"sort",children:"Sort by: "}),s("select",{id:"sort",className:"sort-select",value:l,onChange:r=>b(r.target.value),children:[e("option",{value:"orderCode",children:"Order Code"}),e("option",{value:"igname",children:"IG Name"}),e("option",{value:"number",children:"Number"}),e("option",{value:"address",children:"Address"}),e("option",{value:"price",children:"Price"}),e("option",{value:"status",children:"Status"}),e("option",{value:"createdAt",children:"Date"})]})]}),e("input",{type:"text",className:"search-input",placeholder:"Search by any field",value:p,onChange:r=>v(r.target.value)}),e("button",{className:"search-button",onClick:f,children:"Search"})]})]}),s("table",{className:"order-table",children:[e("thead",{children:s("tr",{children:[e("th",{children:"Order Code"}),e("th",{children:"tên ig"}),e("th",{children:"Number"}),e("th",{children:"Address"}),e("th",{children:"Item"}),e("th",{children:"giá"}),e("th",{children:"sl"}),e("th",{children:"Total Price"}),e("th",{children:"Status"}),e("th",{children:"Date"})]})}),e("tbody",{children:g(d).map((r,a)=>s("tr",{className:"order-row",children:[e("td",{className:"order-code",children:r.orderCode}),e("td",{className:"order-igname",children:r.igname}),e("td",{className:"order-number",children:r.number}),e("td",{className:"order-address",children:r.address}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((t,n)=>e("div",{className:"product-details",children:e("span",{className:"product-name",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name})},n)):e("span",{children:"No products available"})}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((t,n)=>e("div",{className:"product-details",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(t.price.replace(/,/g,"").replace("VND","")))},n)):e("span",{children:"No products available"})}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((t,n)=>e("div",{className:"product-details",children:e("span",{className:"product-quantity",children:t.quantity})},n)):e("span",{children:"No products available"})}),e("td",{className:"order-price",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(r.price))}),e("td",{className:"order-status",children:s("select",{value:r.status,onChange:t=>{const n=[...d];n[a].status=t.target.value,o(n)},children:[e("option",{value:"chưa xác nhận",children:"Chưa xác nhận"}),e("option",{value:"đã xác nhận",children:"Đã xác nhận"}),e("option",{value:"đã hoàn thành",children:"Đã hoàn thành"})]})}),e("td",{className:"order-date",children:new Date(r.date??"").toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"})})]},a))})]})]})})}):e("p",{children:"Redirecting to login..."})}export{I as default};
