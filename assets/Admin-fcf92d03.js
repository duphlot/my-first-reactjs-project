import{r as c,a as e,F as N,j as t,u as v,e as y,f as u}from"./index-b83050ee.js";import{a as g,r as S,b as A,g as C,o as j}from"./index.esm2017-9a477d71.js";import{a as w}from"./firebaseConfig-cc016d38.js";function D(){let[l,o]=c.useState([]),[i,h]=c.useState("");c.useState("");let[n,p]=c.useState("orderCode");const m=async()=>{const r=g(w),s=S(r,"order"),a=await A(s);a.exists()?(o(Object.values(a.val())),console.log(a.val())):alert("No data available")},b=()=>{const r=l.filter(s=>Object.values(s).some(a=>typeof a=="string"&&a.toLowerCase().includes(i.toLowerCase())));r.length>0?o(r):alert("Order not found")},f=r=>r.sort((s,a)=>(s[n]??"")<(a[n]??"")?-1:(s[n]??"")>(a[n]??"")?1:0);return c.useEffect(()=>{m()},[]),e(N,{children:e("body",{style:{overflowY:"scroll"},children:t("div",{className:"admin-container",children:[e("h1",{className:"admin-title",children:"Show the all order billing"}),t("div",{className:"admin-controls",children:[e("button",{className:"admin-button",onClick:m,children:"Reload"}),t("div",{className:"search-container",children:[t("div",{className:"sort-container",children:[e("label",{htmlFor:"sort",children:"Sort by: "}),t("select",{id:"sort",className:"sort-select",value:n,onChange:r=>p(r.target.value),children:[e("option",{value:"orderCode",children:"Order Code"}),e("option",{value:"igname",children:"IG Name"}),e("option",{value:"number",children:"Number"}),e("option",{value:"address",children:"Address"}),e("option",{value:"price",children:"Price"}),e("option",{value:"status",children:"Status"}),e("option",{value:"createdAt",children:"Date"})]})]}),e("input",{type:"text",className:"search-input",placeholder:"Search by any field",value:i,onChange:r=>h(r.target.value)}),e("button",{className:"search-button",onClick:b,children:"Search"})]})]}),t("table",{className:"order-table",children:[e("thead",{children:t("tr",{children:[e("th",{children:"Order Code"}),e("th",{children:"tên ig"}),e("th",{children:"Number"}),e("th",{children:"Address"}),e("th",{children:"Item"}),e("th",{children:"giá"}),e("th",{children:"sl"}),e("th",{children:"Total Price"}),e("th",{children:"Status"}),e("th",{children:"Date"})]})}),e("tbody",{children:f(l).map((r,s)=>t("tr",{className:"order-row",children:[e("td",{className:"order-code",children:r.orderCode}),e("td",{className:"order-igname",children:r.igname}),e("td",{className:"order-number",children:r.number}),e("td",{className:"order-address",children:r.address}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((a,d)=>e("div",{className:"product-details",children:e("span",{className:"product-name",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.name})},d)):e("span",{children:"No products available"})}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((a,d)=>e("div",{className:"product-details",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(a.price.replace(/,/g,"").replace("VND","")))},d)):e("span",{children:"No products available"})}),e("td",{className:"order-products",children:r.products&&Array.isArray(r.products)?r.products.map((a,d)=>e("div",{className:"product-details",children:e("span",{className:"product-quantity",children:a.quantity})},d)):e("span",{children:"No products available"})}),e("td",{className:"order-price",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(Number(r.price))}),e("td",{className:"order-status",children:t("select",{value:r.status,onChange:a=>{const d=[...l];d[s].status=a.target.value,o(d)},children:[e("option",{value:"chưa xác nhận",children:"Chưa xác nhận"}),e("option",{value:"đã xác nhận",children:"Đã xác nhận"}),e("option",{value:"đã hoàn thành",children:"Đã hoàn thành"})]})}),e("td",{className:"order-date",children:new Date(r.date??"").toLocaleString("vi-VN",{dateStyle:"short",timeStyle:"short"})})]},s))})]})]})})})}const F=()=>{const l=v(),[o,i]=c.useState(!1),h=C();return c.useEffect(()=>{const n=j(h,p=>{p?i(!0):(i(!1),l("/login"))});return()=>n()},[h,l]),o?t(N,{children:[t("div",{className:"sidebar",children:[e("h2",{children:"Admin Dashboard"}),t("ul",{children:[e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/dashboard",children:"Dashboard"})}),e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/users",children:"Users"})}),e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/products",children:"Products"})}),e("li",{children:e("a",{href:"/my-first-reactjs-project/#/admin/orders",children:"Orders"})})]})]}),t(y,{children:[e(u,{path:"/dashboard",element:e("h1",{children:"Admin Dashboard"})}),e(u,{path:"/users",element:e("h1",{children:"Users"})}),e(u,{path:"/products",element:e("h1",{children:"Products"})}),e(u,{path:"/orders",element:e(D,{})})]})]}):e("p",{children:"Redirecting to login..."})};export{F as default};
